<!DOCTYPE html>
	<html class="sl-root base export loaded">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Python II: Slides</title>
		<meta name="description" content="Slides">

		<link rel="stylesheet" type="text/css" href="lib/offline-v2.css">
	</head>
	<body class="reveal-viewport theme-font-sketch theme-color-black-mint">
		<div class="reveal">
			<div class="slides">
				<section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 250px; height: auto;" data-block-id="ad3407264e7490d69eb2f0b07e9513bd"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Python II</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="4a683bd29543f28dc44ec41528e376f3"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Introductions</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="83c8b940600f2461b8d61ec9a81786cc"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Name</li>
	<li>Role/Job</li>
	<li>Length of tenure</li>
	<li>Programming experience
	<ul>
		<li>Python specifically</li>
	</ul>
	</li>
	<li>Why did you sign up?</li>
	<li>Define success for you in this course</li>
</ul>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="bfe0d01db43acd1db45e598386b04480"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>What this class is</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="1fd51f4791f4d2e7da331874dd897f24"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Intermediate / Advanced topics in Python</li>
	<li>Lots of hands-on lab work</li>
	<li>Lots of class participation
	<ul>
		<li>Share your war stories and experiences</li>
	</ul>
	</li>
	<li>A walk through some real-world usages for the language</li>
	<li>The Beta release, and delivery, of the course material</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="3cf698189734b2ce397b042f4d00e346"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>What this class isn't</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="45fb3b4585f52960aecf1a573134697a"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>In depth information on specific Python modules</li>
	<li>Every intermediate/advanced topic in Python</li>
	<li>Rigidly structured</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="13b1ceeebfbdddb32f5e59fc9b359103"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Beta - My ask of you</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="2d44861f43abf34dd7925b26e44cc2b4"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Feedback!</li>
	<li>What's working?</li>
	<li>What's not working?</li>
	<li>What would you change?</li>
	<li>What knowledge was too deep?
	<ul>
		<li>Too shallow?</li>
	</ul>
	</li>
	<li>What topics were good, bad, ugly?</li>
</ul>
</div></div></section><section><div data-block-id="bfd4d997458e0094c756064f38114717" class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Class Materials</h2>
</div></div>
<div data-block-id="62f357558324a22808062ac20c461499" class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;"><div data-placeholder-text="Text" data-placeholder-tag="p" class="sl-block-content">
<ul>
	<li>All the materials for the class are available on GitHub:</li>
</ul>

<p><a href="https://github.com/jeremyprice/RU_Python_II" target="_blank">https://github.com/jeremyprice/RU_Python_II</a></p>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="64bace901e699e8279a4f6f0d6cece26"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text" dir="ui"><h1>Pre-Work</h1></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="a8b290d09aab47c23c1657131e923543"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Get a copy of the course materials</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 338px; height: auto;" data-block-id="70810f390d0f5f70fb6f303a0ba6f5c0"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Make sure git is installed on your machine</li>
	<li>Clone the GitHub project</li>
	<li><a href="https://github.com/jeremyprice/RU_Python_II" target="_blank">https://github.com/jeremyprice/RU_Python_II</a></li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="b0d07ff51c5edad5d907029804873229" style="min-width: 30px; min-height: 30px; width: 551px; height: 114px; left: 205px; top: 490px;"><div class="sl-block-content" style="z-index: 13; border-width: 1px;"><pre class="bash"><code># optional step
sudo yum install git

# clone the repo
git clone https://github.com/jeremyprice/RU_Python_II</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="9980632bbfa3a5795e738a7f9c9cfa36"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>System Config</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="4539550632a53790a3a96ec8dc2974e8"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Make sure Python is installed
	<ul>
		<li>Python 2 for this course</li>
	</ul>
	</li>
	<li>Lab machines have CentOS 7 with Python 2 already installed </li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="f5829f0feae9e1427b5658c5df4b155f" style="min-width: 30px; min-height: 30px; width: 500px; height: 36px; left: 230px; top: 444px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>python --version</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="3ba29c67a710fd0946b8e82fb84e8fe0"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Editor Config</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="bbc01c4121783d0bac050ece9a30362c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Install and setup your favorite editor
	<ul>
		<li>vim, atom.io, emacs, nano, etc.</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 27px; height: auto;" data-block-id="40cfd2e3d56311c07e4cc4c11babd64e"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Virtualenv</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 125px; height: auto;" data-block-id="42fcf6637525a64761769fba83bf3817"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="text-align: left; z-index: 11;">
<ul>
	<li>virtualenv allows us to setup isolated python environments
	<ul>
		<li>customized to your version and dependency requirements</li>
	</ul>
	</li>
	<li>Comes with distribute, easy_install, and pip</li>
	<li>Allows control of environments where root authority is lacking</li>
</ul>

<p> </p>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="2d6f41ead025e714270875e950bb5737" style="min-width: 30px; min-height: 30px; width: 395px; height: 262px; left: 283px; top: 403px;"><div class="sl-block-content" style="z-index: 13;" data-highlight-theme="zenburn"><pre class="bash"><code>#install on CentOS 7
sudo yum install -y python-virtualenv

# create a new virtual env
virtualenv &lt;directory_name&gt;

# work in the new virtual env
cd &lt;directory_name&gt;
source bin/activate

# stop working on the virtual env
deactivate
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="ec42fd503445740e79faef2635e27b1b"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>PIP</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="c90f6297826ca79f7bbb4bab43b0a3b0"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>PIP is a Python package manager
	<ul>
		<li>built on setuptools package</li>
		<li>finds packages in the cheese shop
		<ul>
			<li><a href="https://pypi.python.org/pypi" target="_blank">https://pypi.python.org/pypi</a></li>
		</ul>
		</li>
	</ul>
	</li>
	<li>Standard package commands:
	<ul>
		<li>install, uninstall, list, search</li>
	</ul>
	</li>
	<li>Installation instructions:
	<ul>
		<li>Already installed by virtualenv!</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="50f8450ca8ee01bc2fefcbc1c6f065c0"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>IPython</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="1a7d3268faab9a4bcc9cdb0d6ad24d7c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>We will use IPython in this class for a lot of our shell interaction</li>
	<li>You can create a virtualenv if desired
	<ul>
		<li>IPython, and dependencies, won't be the only packages we will install for the course</li>
	</ul>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 500px; height: 55px; left: 230px; top: 490px;" data-block-id="45335f7549cf5d9f65932a1f1ad5c00f"><div class="sl-block-content" style="z-index: 13;" data-highlight-theme="zenburn"><pre class="none"><code># make sure you are in the virtualenv
pip install ipython</code></pre></div></div></section><section class="has-dark-background" data-background-color="#274e13"><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="4f01f61d1caf8201cf1393f864bb66f9"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Lab</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="afb72248ecf9aa3ed4bbc9630e90f0e1"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Grab the materials for the class</li>
	<li>Verify Python version info</li>
	<li>Install virtualenv</li>
	<li>Create a virtualenv
	<ul>
		<li>activate it</li>
	</ul>
	</li>
	<li>Install IPython in the virtualenv</li>
</ul>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="9f747b7c1e3b12fada2f607d614a50f4"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Python Review</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="b66f37fe21f8fdf4d4e30998e10d1027"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Anatomy of a Module</h2>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="c4df4c3e1e48fe4a70561ab78742437a" style="min-width: 30px; min-height: 30px; width: 500px; height: 249px; left: 230px; top: 274px;"><div class="sl-block-content" style="z-index: 12;"><pre class="python"><code>#!/usr/bin/env python2
# -*- coding: utf-8 -*-
# Line #1 = shebang
# Line #2 = encoding declaration

"""Docstrings"""
# Inline documentation

Import(s)

Statements</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="7207b49664da6f8faa4266d46c97e156"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 11;">
<h2>Python Keywords</h2>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 498px; height: 157px; left: 230px; top: 274px;" data-block-id="d10afe5d979474ad3ceb2f151721741f"><div class="sl-block-content" style="z-index: 12;"><pre class="python"><code>and       del       from      not       while
as        elif      global    or        with
assert    else      if        pass      yield
break     except    import    print
class     exec      in        raise
continue  finally   is        return
def       for       lambda    try</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 70px; height: auto;" data-block-id="08d70c1ef35ca9f24cea85b2fda35372"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Tuple Type</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 144px; height: auto;" data-block-id="38edd88794132f02c51a31ffe87c11cb"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Tuples are sequences of other objects that cannot be changed
	<ul>
		<li>they are "immutable"</li>
	</ul>
	</li>
	<li>Tuples can contain any type of object, and can be sliced
	<ul>
		<li>they’re ordered</li>
	</ul>
	</li>
	<li>A one element tuple is formed by (element,) where the comma makes it a tuple</li>
	<li>Examples:</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="c6be75fadd3465c5d47bc7110836a4c8" style="min-width: 30px; min-height: 30px; width: 500px; height: 94px; left: 230px; top: 490px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>tup = (1, "a", 3)
tup = tuple()
tup = (1,) # Comma needed for single element
gen = (x**2 for x in range(1,4)) # Not a tuple!</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 70px; height: auto;" data-block-id="b4b3d0e2d6fa75c6eef81fce92a6d820"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>List Type</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 144px; height: auto;" data-block-id="16f3e21c11e4f1a638e0c130000b45ca"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>Lists are sequences that can be changed (“mutable”)</p>
	</li>
	<li>
	<p>Lists can contain other object types and be sliced</p>
	</li>
	<li>
	<p>A list is a set of objects separated by commas and enclosed in square brackets</p>
	</li>
	<li>
	<p>Examples:</p>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="82208a2140c376065e7483a87d10a1ac" style="min-width: 30px; min-height: 30px; width: 308px; height: 80px; left: 326px; top: 369px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>lst = [1, "a", 3]
lst = list()
lst = [x for x in xrange(5)]</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 70px; height: auto;" data-block-id="d40195872fda290df1f1f1f3b76feeb4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Dictionary Type</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 144px; height: auto;" data-block-id="40169bf3489037768a8faed168c6f42c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>A dictionary (“dict”) type is a set of expressions that are associated 1 to 1 with other expressions</p>
	</li>
	<li>
	<p>A dict provides a handy “mapping” between a “key” expression and its associated “value” expression</p>
	</li>
	<li>
	<p>A dict is not an ordered sequence, it’s a mapping.</p>
	</li>
	<li>
	<p>Examples:</p>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="8a23f2cb11145212ebea58d33fe741cf" style="min-width: 30px; min-height: 30px; width: 423px; height: 80px; left: 269px; top: 400px;"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>dic = {"a": 1}
dic = dict(a=1)
dic = {x: chr(x) for x in range(97, 107)}</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 57px; height: auto;" data-block-id="8a477cb23399eacc10633d38502cc588"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Set Type</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 146px; height: auto;" data-block-id="31d0ceecff74adcbcdc82e871d8d23de"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>A set is a mutable group of unordered immutable objects with unique values
	<ul>
		<li>no duplicates</li>
		<li>the set is mutable, but not the objects within it</li>
	</ul>
	</li>
	<li>Uses the ‘{}’ symbols just like a dictionary, but doesn’t have ‘:’ i.e. no key/value pairs</li>
	<li>Slicing is not allowed
	<ul>
		<li>but iterators work</li>
	</ul>
	</li>
	<li>Set operations are powerful, but perhaps not the most efficient</li>
	<li>Examples:</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="4a55bf33bffbd75cd6dbc7e5438ca259" style="min-width: 30px; min-height: 30px; width: 296px; height: 80px; left: 332px; top: 560px;"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>st = {1,2,2,3}
st = set([1,2,2,3])
st = {x for x in range(1,4)}</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 33px; height: auto;" data-block-id="7c0ad5c7c209ff9b4418e96015b23b16"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Yield Statement</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 140px; height: auto;" data-block-id="e52b425aabe0c088939626fbce491f4a"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>yield is similar to return, but suspends execution of the called function instead of ending the function</p>

	<ul>
		<li>
		<p>Saves the state</p>
		</li>
	</ul>
	</li>
	<li>
	<p>On the next call to the function:</p>

	<ul>
		<li>
		<p>yield picks up where it left off</p>
		</li>
		<li>
		<p>with all identifier values still holding the same values</p>
		</li>
	</ul>
	</li>
	<li>
	<p>A function with a yield statement is a generator</p>
	</li>
	<li>
	<p>Example:</p>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="537c59722f164aeb0d028e055e55261f" style="min-width: 30px; min-height: 30px; width: 205px; height: 114px; left: 378px; top: 504px;"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>def foo(bar=10):
    i = 1
    while i &lt; bar:
        yield i
        i = i + 1</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 33px; height: auto;" data-block-id="013cc27fc181f2d53eb3eceea4be9908"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>With Statement</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 140px; height: auto;" data-block-id="23d483949552ab56084691b4e4d9c69c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>The with statement is used to run a suite of other statements under a “context manager”</p>
	</li>
	<li>
	<p>Special methods __enter__() and __exit__() are called to setup and takedown a “context”</p>
	</li>
	<li>
	<p>Common for doing i/o (which auto-closes the file handle) and threading (which auto-acquires and releases lock)</p>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 375px; height: 55px; left: 293px; top: 444px;" data-block-id="6479886d43802d800630c69b42ef8d09"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>with file("foo.txt", "r") as infile:
    all_txt = infile.read()
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 70px; height: auto;" data-block-id="c0edc73c719b6cd3bdc61f7e77156c2e"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Import and From Statements</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 144px; height: auto;" data-block-id="39864f663da4015ab35b2a64bb29d82b"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>To make a set of identifiers in another module available for use by your module, you must first use import or from</p>
	</li>
	<li>
	<p>import pulls in identifiers from module(s) but the module name must be used as a prefix</p>

	<ul>
		<li>
		<p>only module name is added to local namespace</p>
		</li>
	</ul>
	</li>
	<li>
	<p>"from" pulls in identifiers from modules but avoids need to prefix with the module name</p>

	<ul>
		<li>
		<p>identifier is added to local namespace</p>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 70px; height: auto;" data-block-id="f003146709ad039ed2916b9d98fdbe66"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Documentation</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 144px; height: auto;" data-block-id="b84748fdfbaeb91d7414d600f9e61df4"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" dir="ui">
<ul>
	<li>
	<p>All the docs for version 2:</p>

	<ul>
		<li>
		<p><a href="https://docs.python.org/2/" target="_blank">https://docs.python.org/2/</a></p>
		</li>
	</ul>
	</li>
	<li>
	<p>Standard library:</p>

	<ul>
		<li>
		<p><a href="https://docs.python.org/2/library/index.html" target="_blank">https://docs.python.org/2/library/index.html</a></p>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section class="has-dark-background" data-background-color="#274e13"><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="b224d248ab6226880227c7fa177b762c"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Lab - Pyreview</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="6fb8e0bc4e5a108cf25b8170dfa8e990"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Follow the instructions in:</li>
</ul>

<pre style="text-align:center">lab_pyreview.py</pre>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="d5cabbf27fd3a150dc2745ecfad57079"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>REST</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="657d76438a9577ada30b47a8d2d17297"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>REST Principles</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="d4c7b45f1f784756319f8b9c29134d04"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Representational State Transfer</p>
	</li>
	<li>
	<p>A simple, client/server web services API currently in favor</p>
	</li>
	<li>
	<p>Way of locating and manipulating “resources” (usually XML or JSON documents) on a network</p>
	</li>
	<li>
	<p>Commonly based HTTP protocol (GET, POST, PUT, DELETE)</p>
	</li>
	<li>
	<p>Stateless (all state on client or server)</p>
	</li>
	<li>
	<p>Simple, predictable resource pathing scheme based on URL</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 103px; height: auto;" data-block-id="4108edf05663aeefa534bee0fa7982bc"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>More RESTing</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 199px; height: auto;" data-block-id="266e7392a124b6c37353105dbf8d8344"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>ReSTful services generally map a CRUD interface (Create, Read, Update, Delete) by URL mappings that embed data</p>

	<ul>
		<li>
		<p>e.g. GET v2/{tenant_id}/servers</p>
		</li>
		<li>
		<p>HTTP POST -&gt; Create</p>
		</li>
		<li>
		<p>GET -&gt; Read</p>
		</li>
		<li>
		<p>PUT -&gt; Update</p>
		</li>
		<li>
		<p>DELETE -&gt; Delete</p>
		</li>
	</ul>
	</li>
	<li>
	<p>HTTP GET calls to a ReSTful service should not change state i.e. read only</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 54px; height: auto;" data-block-id="0380f6313628350d0f03d0650907d4fd"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Accessing Web Data: urllib2</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 149px; height: auto;" data-block-id="c4d8526eb21af6603819813131411ef7"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Client functions to access URL’s</p>
	</li>
	<li>
	<pre>import urllib2</pre>
	</li>
	<li>
	<p>urllib2.urlopen(url[,data]) is a common call signature</p>

	<ul>
		<li>
		<p>url is the URL of the target resource</p>
		</li>
		<li>
		<p>data is to be sent to the server</p>
		</li>
	</ul>
	</li>
	<li>
	<p>Only HTTP uses data currently</p>
	</li>
	<li>
	<p>If data exists</p>

	<ul>
		<li>
		<p>it must be URL encoded</p>
		</li>
		<li>
		<p>HTTP GET becomes a POST</p>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 66px; height: auto;" data-block-id="888913486f103d1e5cc2cf74aa4d0509"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>urllib2</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 177px; height: auto;" data-block-id="cd3149a7dd880b12bfd96a83d21533f1"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>A “file-like object” is returned from urlopen() which can be accessed with file semantics (read, readlines, etc.)</p>
	</li>
	<li>
	<pre>Raises:
URLError (subclass of IOError)
HTTPError (subclass of URLError)</pre>
	</li>
	<li>
	<p>Also takes urllib2.Request objects, useful for including HTTP headers in a dict (or use Request add_header method)</p>
	</li>
	<li>
	<p>Can handle redirections, HTTP error responses, cookies, proxies, HTTP authentication</p>
	</li>
</ul>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="62e347971a15c8502c2f2af1900fdeb2"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Serialization</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="f1c61382a232e515813b48cce34fb1ab"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>JSON</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="4eba138fe49fecfcf546031bbb70bd60"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>Javascript Object Notation</p>
	</li>
	<li>
	<p>Part of Javascript language definition</p>
	</li>
	<li>
	<p>Easy for parse for humans and machines</p>
	</li>
	<li>
	<p>Language independent</p>
	</li>
	<li>
	<p>“lightweight data interchange format”</p>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="800931370d5d072862fc49e3df4c671d" style="min-width: 30px; min-height: 30px; width: 469px; height: 50px; left: 246px; top: 510px;"><div class="sl-block-content" style="z-index: 13;"><pre class="bash"><code>Name/value pair collection (dict in Python)
Ordered list of values (list in Python)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="aebd62350cbaf19e817f078f04919c58"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>JSON Details</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="94d04a290a62b131dbed1f61d74fecea"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>An “object” is an unordered set of name:value pairs (called “members”) separated by commas and surrounded by curly braces</p>

	<ul>
		<li>
		<pre>{ Name1:Value1, Name2:Value1,… }</pre>
		</li>
	</ul>
	</li>
	<li>
	<p>An “array” is a set of “elements” surrounded by square brackets</p>

	<ul>
		<li>
		<pre>[ element1, element2,… ]</pre>
		</li>
	</ul>
	</li>
	<li>
	<p>Elements are strings, numbers, true, false, null, object, array</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="c678f0328a614915951ca2407b239304"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>More JSON</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="293c4d15e70bf170390b1c5057d66094"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Strings are made of:</p>

	<ul>
		<li>
		<p>Unicode chars (\uhhhh)</p>
		</li>
		<li>
		<p>\,\\,/,\b,\f,\n,\r,\t</p>
		</li>
	</ul>
	</li>
	<li>
	<p>Numbers are signed integer, decimal, or exponent (“e”) flavors only</p>
	</li>
	<li>
	<p>Whitespace is fine</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="c3bb888daef9d80c90500b0f1a5d6e76"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 11;">
<h2>Python to JSON</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="807708580a6b5c0ebc530e5cbc02abc9"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 12;">
<ul>
	<li>import the json module</li>
	<li>Serialize a Python object to JSON</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="decd5574bb4cf0f1c303f9dfe7424d55" style="min-width: 30px; min-height: 30px; width: 427px; height: 80px; left: 267px; top: 380px;"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>import json
json.dump(python_obj, fo, **kwargs)
json.dumps(python_obj, **kwargs)</code></pre></div></div>
<div class="sl-block" data-block-type="text" data-block-id="88add78d2a2fead0efe2757e4698368c" style="height: auto; min-width: 30px; min-height: 30px; width: 600px; left: 181px; top: 497px;"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 14;">
<p>Note: JSON is not a ”framed” protocol <br>
i.e. can’t append multiple JSON objects to same file</p>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="f9fa1cfb90d2de856c89be3157de2873"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>JSON to Python</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="5bbe142efbdfc5dba9d21a32ab8fdc51"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>import the json module</li>
	<li>Deserialize a JSON object to Python</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 427px; height: 80px; left: 267px; top: 373px;" data-block-id="8a081ff60452964cb3fa1bf39f818fe0"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>import json
python_obj = json.load(fo, **kwargs)
python_obj = json.loads(string, **kwargs)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="9ede19392aea62a261328d879a86b97f"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>JSON Module Caveats</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="48c9e150199bb1754997f503691d9d94"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>JSON keys in key/value pairs are always strings. Unlike Python.</p>
	</li>
	<li>
	<p>Default json module encoder only encodes “ASCII-compatible” strings. Use u for other encodings</p>
	</li>
	<li>
	<p>Same name in name:value pairs uses the last one</p>
	</li>
	<li>
	<p>Out of range floats are handled correctly (nan, inf, -inf)</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="cc1835a7d49530070be014445e1311d4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Python to JSON Translations</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 346px; left: 307px; top: 280px; height: auto;" data-block-id="3c84b5f7667594174378740f10d8b80a"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<pre><span style="font-size:0.7em">dict -&gt; object
list, tuple -&gt; array
str, unicode -&gt; string
int, float -&gt; number
True, False -&gt; true, false
None -&gt; null</span></pre>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 70px; height: auto;" data-block-id="977e7f5c48d480797cd48b1bc346fdf4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Performance</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 144px; height: auto;" data-block-id="08330435217626112cd4465c9633ff16"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>The builtin json module can be slow</li>
	<li>Other pypi packages have C extensions to speed them up
	<ul>
		<li>simplejson, yajl, python-cjson, UltraJSON</li>
	</ul>
	</li>
	<li>Opinion:
	<ul>
		<li>Don't load/save huge json objects</li>
		<li>profile your app to make sure it is the json encode/decode</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 51px; height: auto;" data-block-id="881ec559d261971dbea03d8a56a5b69c"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Pickle and Shelve</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 125px; height: auto;" data-block-id="ba4a4795c71c329ec4d1636454a2992c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>The pickle module does a similar job to JSON, but is Python specific</p>

	<ul>
		<li>
		<p>Not good for machine data interchange</p>
		</li>
		<li>
		<p>Allows multiple pickled objects to be dumped to the same file</p>

		<ul>
			<li>
			<p>must be loaded in same order on way back</p>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li>
	<p>The shelve module essentially provided a persistent dict for pickled objects in a database</p>
	</li>
	<li>
	<p>Opinion: Only use these for interchange within your own app</p>
	</li>
</ul>
</div></div></section><section class="has-dark-background" data-background-color="#274e13"><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="a92b84003797bbec17e8d9c97840723d"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Lab JSON</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="217cc7414054ab50d218d266cdfc50f6"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
<span style="color:rgb(255, 255, 255); text-align:left">Follow the instructions in:</span>
	<ul>
		<li>
		<pre>lab_json.py<span style="color:rgb(255, 255, 255); text-align:left">​</span></pre>
		</li>
	</ul>
	</li>
</ul>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="2f2668d20a783c95e34a56aa531e85c1"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Subprocessing</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="83b30e5ca810a1f224df479286d9f19b"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Subprocessing in Python</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="7b5eff37132e4d84679efa6574ec66d3"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Python can spawn and control entire processes using the subprocess module</p>
	</li>
	<li>
	<p>Generally means redirecting the basic file descriptors (stdin, stdout, stderr) to gain programmatic access</p>
	</li>
	<li>
	<p>Forks a new process and uses pipes for redirection</p>
	</li>
	<li>
	<p>As usual, beware of invoking a process based on direct or indirect user input</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="3cbd70b304757d3d4830aba9d58f0567"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Subprocess Module</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="4b02d3aa58ad59539881a1d6703bb63a"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Contains many convenience functions for creating and managing subprocesses</p>
	</li>
	<li>
	<p>subprocess.Popen class is the most full-featured interface</p>
	</li>
	<li>
	<p>subprocess.call() is the simplest interface</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 10px; height: auto;" data-block-id="ad788fb002b807e1169a303879541273"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Subprocess - Details</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 99px; height: auto;" data-block-id="b0812f19601d7950fe4aa03f63445cb4"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p><span style="color:#FFA07A">call()</span> - spawn a subprocess, wait for completion, return exit code</p>
	</li>
	<li>
	<p><span style="color:#FFA07A">check_call()</span> - same as call(), but <span style="color:rgb(255, 255, 255); text-align:left">raises CalledProcessError exception if exit code isn't 0</span></p>
	</li>
	<li>
	<p><span style="color:rgb(255, 160, 122); text-align:left">check_output()</span><span style="color:rgb(255, 255, 255); text-align:left"> - same as call(), but </span><span style="color:rgb(255, 255, 255); text-align:left">returns process output as a byte string</span></p>
	</li>
	<li>
	<p>Caveats:</p>

	<ul>
		<li>
		<p>Don’t use pipes for stdout or stderr</p>
		</li>
		<li>
		<p>Only use shell=True if need shell features</p>
		</li>
	</ul>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="f26ccae3598c6eda2b4aa5fd42fd039f" style="min-width: 30px; min-height: 30px; width: 808px; height: 200px; left: 76px; top: 495px;"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>subprocess.call(args, *, stdin=None, stdout=None, stderr=None, shell=False)
subprocess.check_call(args, *, stdin=None, stdout=None, stderr=None, shell=False)
subprocess.check_output(args, *, stdin=None, stdout=None, stderr=None, shell=False)

# examples
exit_code = subprocess.call(['ls', '-al'])
exit_code = subprocess.check_call('false')
exit_code = subprocess.check_output(['ls', '-al'])</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 10px; height: auto;" data-block-id="c0e0668d069f14af92b3017986ba896c"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Subprocess - POpen</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 99px; height: auto;" data-block-id="2f01a525fbe5b76aae3277da1009231e"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>Swiss army knife of subprocess spawning</p>
	</li>
	<li>
	<p>Can map stderr to stdout using subprocess.STDOUT</p>
	</li>
	<li>
	<p>Use subprocess.PIPE in stdin, stdout, stderr</p>
	</li>
	<li>
	<p>Check out all the args/kwargs in the docs:</p>

	<ul>
		<li>
		<p><span style="font-size:0.7em"><a href="https://docs.python.org/2/library/subprocess.html#subprocess.Popen" target="_blank">https://docs.python.org/2/library/subprocess.html#subprocess.Popen</a></span></p>
		</li>
		<li>
		<pre><span style="font-size:0.7em">​​​- poll() sees if child is terminated
- wait() waits for child to terminate
- communicate(input=None) sends input to child stdin. Use instead of stdin.write()
- send_signal(signal) sends given signal to child
- terminate() and kill() send respective signals to child</span></pre>
		</li>
	</ul>
	</li>
</ul>

<p> </p>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 485px; height: 75px; left: 238px; top: 593px;" data-block-id="d1dba794cdfddce32f637a7aefd10f5f"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code># example
subproc = subprocess.POpen(['ls', '-al'])
(stdoutdata, stderrdata) = subproc.communicate()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 10px; height: auto;" data-block-id="c76a3a2cbaebeb40da9147488cf930a2"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Subprocess - Caveats</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 99px; height: auto;" data-block-id="b50d0f31a3ae0153675200e78f34f158"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>Note: if args is a string, must use shell=True to specify args</p>
	</li>
	<li>
	<p>Once again, don’t use shell=True with user entered data</p>
	</li>
	<li>
	<p>shell=False does not call a shell either directly or indirectly, allowing all characters (even metacharacters) to be passed safely</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 10px; height: auto;" data-block-id="70272e2afd5583ee9b93d9f0751f71b4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Subprocess - POpen Interaction</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 99px; height: auto;" data-block-id="49ed01ba6c02ddcec60e8d990b0cb325"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>Popen.std* are file objects if std*=PIPE was used in Popen constructor</p>
	</li>
	<li>
	<p>Popen.pid is child process ID</p>
	</li>
	<li>
	<p>Popen.returncode is child exit code. Set by poll(), wait(). None if child not terminated. If negative, indicates child was terminated by that signal number.</p>
	</li>
</ul>
</div></div></section><section class="has-dark-background" data-background-color="#274e13"><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="3550af322b5321b30c93d68064f5dd16"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Lab Subprocess</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="0c7b492c0846e54e01e5dfceb045656e"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Follow the instructions in:</li>
</ul>

<pre style="text-align:center">lab_subprocess.py</pre>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="a4cdff24d7ffd833848200116b4aebf0"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Multiprocessing / Multithreading</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 79px; top: 50px; height: auto;" data-block-id="4f5aeecd47abc86b91382ee4263fc1d9"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Threads Vs. Processes</h2>
</div></div>
<div class="sl-block" data-block-type="image" style="width: 473px; height: 288.004px; left: 244px; top: 146px;" data-block-id="ab3ad5025a285b166fdd57e8ba3325b9"><div class="sl-block-content"><img data-natural-width="450" data-natural-height="274" style="" data-src="python-ii/1828455-threads_v_processes.gif"></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="0884d4c0b0426bae769115a066917e22"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Threads</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="83ee363cf6e832469cad68714a19a96c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Threads are independently scheduled streams of instructions that run within a single OS process</p>
	</li>
	<li>
	<p>Threads have their own stack, registers, scheduling attributes, priorities, signal mask, and thread local memory</p>
	</li>
	<li>
	<p>Threads allow logical concurrency of execution (and possibly parallel execution if configured)</p>
	</li>
	<li>
	<p>Threads introduce the need for synchronization!</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="3468d1894fcd1b3ce8874f75c067bca7"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Threads</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="2093308fd805244424a11f8f1b784c13"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Threads share the same instructions (bytecodes) same identifier bindings, same open files, and other resources</p>
	</li>
	<li>
	<p>Threads cannot exist outside of an OS process</p>
	</li>
	<li>
	<p>Threads are “lightweight” – the overhead of creating them is much less than creating a real process</p>
	</li>
	<li>
	<p>Threads are used for capturing a higher % of available cycles on a single CPU, realtime systems, an asynchronous event handling.</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 19px; height: auto;" data-block-id="66a64033797866320649b816d34affe5"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Threading Models</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 89px; height: auto;" data-block-id="e7f182bb73fd5d065e6f3f12487412b0"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Some common threading models exist:</li>
	<li>Boss/worker
	<ul>
		<li>Boss thread creates worker threads, then loops receiving work requests from a queue or socket</li>
		<li>Worker threads loop on work assignments from boss</li>
	</ul>
	</li>
	<li>
	<p>Peer</p>

	<ul>
		<li>
		<p>All threads work on the backlog without a “manager” thread</p>
		</li>
		<li>
		<p>All threads work on a protected/synchronized queue</p>
		</li>
	</ul>
	</li>
	<li>
	<p>Pipeline</p>

	<ul>
		<li>
		<p>Each thread does a stage of a work pipeline</p>

		<ul>
			<li>
			<p>Each thread accepts work from “previous” thread, passes to “next” thread</p>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 19px; height: auto;" data-block-id="1cf7c3e991b15357f16caac45eeb2a26"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Threading Module</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 121px; height: auto;" data-block-id="06fb9fd7530c3381277b83cd6bde6d8c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Contains all the necessary primitives to handle threading:</p>

	<ul>
		<li>
		<p>threading.Thread() - create a thread from a callable</p>
		</li>
		<li>
		<p>threading.Condition() - create a condition to use for waiting</p>
		</li>
		<li>
		<p><span style="color:rgb(255, 255, 255); text-align:left">threading.Event() - create an event to use for waiting</span></p>
		</li>
		<li>
		<p><span style="color:rgb(255, 255, 255); text-align:left">threading.Lock()/RLock() - Lock a critical section or variable</span></p>
		</li>
		<li>
		<p><span style="color:rgb(255, 255, 255); text-align:left">threading.Semaphore() - Classic acquire/release semaphore</span></p>
		</li>
		<li>
		<p>threading.Timer() - run a callable after timer expires</p>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="72ed16714824769011f877886ba083cf"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Running a Thread</h2>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="b89ce3fe6e8ea2b7ebcb83ff916bcc65" style="min-width: 30px; min-height: 30px; width: 500px; height: 300px; left: 230px; top: 280px;"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>import threading
import time

def xyz():
    for i in range(10):
        print "thread"
        time.sleep(1)

th = threading.Thread(target=xyz)
th.start()
for i in range():
    print "main"
    time.sleep(1)
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="081310e2600c0d32a08ca28ed87f56ae"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Threading Module</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="7c16bbb41c4c5c100d3e929410dda544"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Calling another threads join() causes the caller to wait for thread to end</p>
	</li>
	<li>
	<p>Pass arguments to new thread using the args and kwargs keywords</p>
	</li>
	<li>
	<p>Locks have acquire() and release() methods that can be automatically invoked on the with statement</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="f9b26a633fd494354025f07e4e0159fd"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Threading Module</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="a1a7a5985be04512fa251f7c9d988694"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Condition variables have a wait() to wait for the condition to be reached</p>
	</li>
	<li>
	<p>Condition variables also have notify() and notify_all() that can be used to indicate to other threads that the condition variable has changed</p>
	</li>
	<li>
	<p>Semaphore objects also have acquire() and release() for easy use with with</p>
	</li>
	<li>
	<p>Event objects have set(), clear(), and wait() which indicate if event has happened or not</p>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="01e1d7f08f45661a42daca276f604619"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Bad Bits about Threads</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="e726617dabb978901da4f4c203cdb041"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>The CPython interpreter uses something called the Global Interpreter Lock (GIL) to protect access to the inner workings of the interpreter</li>
	<li>One Python thread at a time can have that lock, thus only one thread at a time can run</li>
	<li>Many threads can be waiting (on data, cpu, etc.)
	<ul>
		<li>Only one can be active regardless of the number of CPUs/cores/etc.</li>
	</ul>
	</li>
	<li>There are ways around this, but there is peril therein</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 20px; height: auto;" data-block-id="cb7a06b9f4cb1305ee1594057cb7adf1"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Threading Worker Example</h2>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="8c388e5d469800442bde615fc567931d" style="min-width: 30px; min-height: 30px; width: 489px; height: 479px; left: 236px; top: 102px;"><div class="sl-block-content" style="z-index: 12;"><pre><code>import Queue
import threading

num_worker_threads = 5

def worker():
    thread_id = threading.current_thread().name
    while True:
        item = q.get()
        print "Worker %s:" % thread_id, item
        q.task_done()

q = Queue.Queue()
for i in range(num_worker_threads):
     t = threading.Thread(target=worker)
     t.daemon = True
     t.start()

work_items = xrange(20)
for item in work_items:
    q.put(item)

q.join()       # block until all tasks are done
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="37f8d3c6ed85cd1913806f55f7d053bf"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Multiprocessing</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="0e12214c4af076a0b6229ffeeecdf1c9"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Multiprocessing module has same interface as threading, but spawns processes instead of threads</li>
	<li>Doesn't suffer from GIL problems of threads</li>
	<li>Higher overhead because it spawns a Python interpreter for each process</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="74e8a364f6c48bba876caa36857ec988"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Multiprocessing</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="06fec45b3a8fef1f606a4f265cda8ef7"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Processes can exchange information via Pipes and Queues</li>
	<li>Can synchronize like Threads</li>
	<li>Can share memory amongst processes</li>
	<li>Can create a pool of workers to map tasks to</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="768acec7e44db576ad91e92fe16836d4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Running a Process</h2>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 500px; height: 300px; left: 230px; top: 280px;" data-block-id="bc03343da107d35cf1a6f63c610d4789"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>import multiprocessing
import time

def xyz():
    for i in range(10):
        print "thread"
        time.sleep(1)

proc = multiprocessing.Process(target=xyz)
proc.start()
for i in range(10):
    print "main"
    time.sleep(1)
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 33px; height: auto;" data-block-id="3372d92f76ddb98f2357db329d3330fe"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Process Worker Example</h2>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 610px; height: 517px; left: 175px; top: 113px;" data-block-id="5a127615f3f525c0d3e680624b2058a9"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>import multiprocessing
import os

def worker(q):
    process_id = os.getpid()
    while True:
        item = q.get()
        print "Worker %s:" % process_id, item
        q.task_done()

if __name__ == "__main__":
    num_worker_processes = 5
    num_work_items = 20
    q = multiprocessing.JoinableQueue(num_work_items+1)
    for i in range(num_worker_processes):
        p = multiprocessing.Process(target=worker, args=[q])
        p.daemon = True
        p.start()

    work_items = xrange(num_work_items)
    for item in work_items:
        q.put(item)

    q.join()       # block until all tasks are done
    print "All done"
</code></pre></div></div></section><section class="has-dark-background" data-background-color="#274e13"><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="1e1348c32a62a2607b555945a7f723b3"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Lab multiprocessing / multithreading</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 338px; height: auto;" data-block-id="2abec1a809c674c724fbd1fece3ebd7b"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Follow the instructions in:</li>
</ul>

<pre style="text-align: center;">​lab_multi.py</pre>

<ul>
	<li>Register your completion in Socrative</li>
</ul>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="e63b2fc8c28429142fa60dbea1f2684b"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>UnitTest</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 91px; height: auto;" data-block-id="084149ecb795c7eb215b86ede5f22b1d"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Test Driven Development</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 180px; height: auto;" data-block-id="8bb4f30a53f710cded87b8c0790a4e43"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>Best early detection of bugs:</p>

	<ul>
		<li>
		<p>Pair programming</p>
		</li>
		<li>
		<p>Continuous Integration</p>
		</li>
		<li>
		<p>Test Driven Development</p>
		</li>
	</ul>
	</li>
	<li>
	<p>Test Driven Development (TDD) says essentially:</p>

	<ul>
		<li>
		<p>Write a test that for a proposed feature and verify it fails</p>
		</li>
		<li>
		<p>Write the minimal amount of code to make the test pass</p>
		</li>
		<li>
		<p>Refactor</p>
		</li>
		<li>
		<p>Repeat</p>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 27px; height: auto;" data-block-id="25d8a812597e352a1b37f0034a7d20ff"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Unittest Module</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 125px; height: auto;" data-block-id="fe45886466c52c677c2064bff68b1f28"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>
	<p>Module in Python used to implement TDD</p>

	<ul>
		<li>
		<p>or other unit testing needs</p>
		</li>
	</ul>
	</li>
	<li>
	<p>Derive a class from unittest.TestCase</p>
	</li>
	<li>
	<p>For a test runner, unittest.main() is the default, or roll your own</p>
	</li>
	<li>
	<p>Simple test to see if two values were multiplied correctly:</p>
	</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="749ce9476336ee1f9be472548e20399d" style="min-width: 30px; min-height: 30px; width: 500px; height: 239px; left: 230px; top: 441px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>import calculator.operations.arithmetic as arith
import unittest

class TestCalculations(unittest.TestCase):
    def test_multiply(self):
        """ test multiply 2 * 2 """
        testVal = arith.mult(2,2)
        self.assertEqual(testVal, 4)

if __name__ == "__main__":
    unittest.main()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 58px; height: auto;" data-block-id="17748876aa3acb093513b2fe939344d5"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Unittest Module</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 161px; height: auto;" data-block-id="d2871cb90df0a5cb402e0a46eedf3d5a"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>If a test fixture is needed to setup/takedown the calculator for each test, we can add methods setUp() and tearDown()</p>
	</li>
	<li>
	<p>The naming standard is that each test method name start with test</p>
	</li>
	<li>
	<p>For unit tests, the TestCase class offers (3) primary verifiers:</p>

	<ul>
		<li>
		<p>assertEqual(): result is equal to the value we expect</p>
		</li>
		<li>
		<p>assertTrue(): result is a True assertion</p>
		</li>
		<li>
		<p>assertRaises(): result is the Exception we expect</p>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 0px; height: auto;" data-block-id="92839211d1b4214284e49caa9a62d3f7"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Unittest Test</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 70px; height: auto;" data-block-id="460c69a12ce78fa56bdab473623420fa"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>
	<p>There are more assert methods to make life easy:</p>

	<ul>
		<li>
		<p>assertNotEqual(): a != b<br>
		assertTrue(): a is True<br>
		assertFalse(): a is False<br>
		assertIs(): a is b<br>
		assertIsNot(): a is not b<br>
		assertIsNone(): a is None<br>
		assertIsNotNone(): a is not None<br>
		assertIn(): a in b<br>
		assertNotIn(): a not in b<br>
		assertIsInstance(): isinstance(a, b) is True<br>
		assertIsNotInstance(): isinstance(a, b) is False<br>
		assertGreater(a, b): a &gt; b<br>
		assertRaises(ex): raises ex<br>
		assertRegexMatches(x, re): regex.search(x) is True</p>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section class="has-dark-background" data-background-color="#274e13"><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="b299d4e3707dbabf3eee648cab585c1d"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Lab</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="5ad5b87684cd4e7b3eb392964420a825"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Follow the instructions in:</li>
</ul>

<pre style="text-align: center;">lab_unittest.py</pre>

<ul>
	<li>Register your completion in Socrative</li>
</ul>
</div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="b3437ed936e39a539119d947b777f8bb"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Mock</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="ee827ae8eaa215921b264b33fa434a58"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>What is a Mock?</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="431c7beade22c2e3de9ab44caaa2f25a"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Let's say you have some code that talks to a database
	<ul>
		<li>If you implement unit tests you probably don't want your code to talk to the actual database</li>
	</ul>
	</li>
	<li>A Mock is an object that looks like the thing your are testing against
	<ul>
		<li>It doesn't have all the underlying logic to DO anything</li>
		<li>Think of it like an actor
		<ul>
			<li>"I'm not a real database, I just play one on TV"</li>
		</ul>
		</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="0243043a9f2106b7176559a230c30048"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Why use Mocks?</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="eaa019aa63b42636bb591020077e5414"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Maybe your resource isn't available</li>
	<li>Maybe you can't force an error on the resource to test how your code will respond</li>
	<li>Maybe it is too costly to use a real resource</li>
	<li>Maybe the real resource takes too long
	<ul>
		<li>Not parallel</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="340edd6fd0a4a5072bcf903ae45dfdcc"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Drawbacks to Mocks</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="4ee9e37bceae4432d9301dd23fe9127c"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Building an accurate Mock is time consuming and difficult
	<ul>
		<li>Has to track the resource changes</li>
	</ul>
	</li>
	<li>You built the Mock, and the code, pollution is possible</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 66px; height: auto;" data-block-id="7e90c53d6d914eb2e09f2d2da768c8aa"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Mock</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 153px; height: auto;" data-block-id="3a19667592899447cebf27bd00ee3f55"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Mock is a library for mocking objects in Python</li>
	<li>It fits well with the unittest library</li>
	<li>Mock and MagicMock objects create attributes and methods as you use them
	<ul>
		<li>store details about how they've been used</li>
	</ul>
	</li>
	<li>Mock is available in Python 3 (&gt; 3.3) and has backports available for Python 2</li>
</ul>

<pre>pip install mock</pre>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 66px; height: auto;" data-block-id="3ded5643e523d118097f6f2d52a4b5ac"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Mock Example</h2>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 545px; height: 204px; left: 208px; top: 178px;" data-block-id="bdde9d5e3ee7d706b95b3bfcdf459816"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code># in Python 2
from mock import MagicMock
# in Python 3
# from unittest.mock import MagicMock
thing = ProductionClass()
thing.method = MagicMock(return_value=3)
thing.method(3, 4, 5, key='value')
3
thing.method.assert_called_with(3, 4, 5, key='value')
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 66px; height: auto;" data-block-id="ad45acba609bb34b33085b996605f451"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Side Effects</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 154px; height: auto;" data-block-id="1e32d12b7901a8a6e407dddb4301182d"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>You can have the mocked object create side effects</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 431px; height: 103px; left: 265px; top: 261px;" data-block-id="96225a56d6d8a944330707f66f293570"><div class="sl-block-content" style="z-index: 13;"><pre class="python"><code>from mock import Mock

thing = Mock(side_effect=KeyError('bam'))
thing()
</code></pre></div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="a3babbfa9413a1412d7d73b6308aa9b2"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Objects</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="057a382ca4f801ab3b40baf9340e4415"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Python and Objects</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="900e57d437d1ca3950a57907612cde97"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Everything in Python is an object</li>
	<li>For instance, try the following code:</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="6dfd29489e0e98302ceb5950e1e2e71b" style="min-width: 30px; min-height: 30px; width: 184px; height: 164px; left: 388px; top: 369px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>class FakeClass:
    pass

a = 1
b = 'hello'
c = FakeClass()
print a, b, c</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="5bd0951cc0f6a2b8c5914103af852ddb"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>"Variables" in Python</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="a93adb2c334247785bf8900421df3dca"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>In most programming languages, variables are a spot to put values</li>
	<li>In Python, we don't create variables and assign values to them
	<ul>
		<li>We create names and bind them to objects</li>
	</ul>
	</li>
	<li>for instance, c = FakeClass() tells Python:
	<ul>
		<li>"I want to refer that FakeClass instance as c"</li>
	</ul>
	</li>
</ul>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="53a8fc76797909801cb8c8e7277b3f4b"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>More about binding</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="0dcb9872861cdab00509403fc03246a4"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Does the following code do what you expect?</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="37469f0717a48b2adadba5877e1af031" style="min-width: 30px; min-height: 30px; width: 186px; height: 243px; left: 387px; top: 350px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>class FakeClass:
    pass

a = FakeClass()
b = a

print b.hello

a.hello = 'world'

print b.hello</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="aefeaec658906ee67ba065bdffaee44b"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text"><h2>Title Text</h2></div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="3875c091494e7c14fca42cb2d4f765a4"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text"><ul>
<li>Bullet One</li>
<li>Bullet Two</li>
<li>Bullet Three</li>
</ul></div></div></section></section><section class="stack"><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="752aa9eafffbf6cbbfee9ddf69abbe5f"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Decorators</h1>
</div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 33px; height: auto;" data-block-id="9e55018179af360e70fa532ec8c4dce2"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Functions</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 140px; height: auto;" data-block-id="3d02e0bdacb1ff3dd937b8c677a01007"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>We all know about functions:</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="7ec3879df1c563828b0fdd6891a78e73" style="min-width: 30px; min-height: 30px; width: 170px; height: 93px; left: 395px; top: 210px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>def func():
    return "hi"

print func()
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="57e063c2da71aecb4462521875ac2a9b"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Scope (namespace)</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="2c6f04263b5b5d1341be01d15f277f22"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Identifiers (names) are looked up in the namespace</li>
	<li>Local to global in steps</li>
	<li>First occurrence found wins</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" data-block-id="01ba34fce3f6df436eb89548c5bd8e80" style="min-width: 30px; min-height: 30px; width: 286px; height: 157px; left: 337px; top: 446px;"><div class="sl-block-content" style="z-index: 13;"><pre><code>info = "hello world"

def localonly():
    print locals()

print globals()
localonly()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="193787186b0002a0969019df49291637"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Scope (globals)</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="c0c0b05dedf32773397c15588d0bbc7a"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>We can still access global variables, but we have to explicitly reference them</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 286px; height: 157px; left: 337px; top: 378px;" data-block-id="eee4d4388db9fbb2bb46cdb26380d6fe"><div class="sl-block-content" style="z-index: 13;"><pre><code>info = "hello world"

def localonly():
    print info

localonly()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="603317f81eb77185f73f460d8b8d58f8"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Scope (global shadowing)</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="858da15f3ad08625f12f4ac17c3a6467"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>If we try to assign the variable it won't do what we think</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 303px; height: 182px; left: 337px; top: 378px;" data-block-id="51f54e1cccfbb6769656b4ba512be01c"><div class="sl-block-content" style="z-index: 13;"><pre><code>info = "hello world"

def localonly():
   info = "inside localonly"
   print info

localonly()
print info</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="84eeacca5cc6b8fd87a78902b8a76ae4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Variable lifetime</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="6345f2c69b844b13234d3245aeb08215"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Variables exist as long as they are in scope</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 303px; height: 182px; left: 337px; top: 378px;" data-block-id="87c51c7220f93dc352664108b9a626c6"><div class="sl-block-content" style="z-index: 13;"><pre><code>def localonly():
   info = "inside localonly"
   print info

localonly()
print info</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="4e83e54fbe10da345e37f06131ad26bf"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Function parameters and args</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="6d2a7ad9cf6dbcbbbc15113a61548722"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Become local variables to the function</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 197px; height: 93px; left: 337px; top: 378px;" data-block-id="4ba1d2e6b6c2fd0fcc41ef37c8acef30"><div class="sl-block-content" style="z-index: 13;"><pre><code>def hello(arg1):
   print locals()

hello(1)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="e818255a5b56207669ec6c3f706d9bf8"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Function parameters and args</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="e7c57fb4962c077527764cd21fd3a1f5"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>Have names and positions</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 290px; height: 198px; left: 337px; top: 378px;" data-block-id="b50ad790f72870086f15993915c12e93"><div class="sl-block-content" style="z-index: 13;"><pre><code>def hello(arg1, arg2=0):
   print locals()

hello(1)
hello(1, 3)
hello()
hello(arg2=15, arg1=10)
hello(arg2=99)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="7c901198090acddd6b206477cc60964e"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Nested functions</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="fdc6ba703658f299cc63d88a4a25285f"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>We can define functions within functions</li>
	<li>Variable lifetime and scoping rules still apply</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 272px; height: 159px; left: 337px; top: 378px;" data-block-id="243cc787a4e2008a1f5a59bf5d5517fa"><div class="sl-block-content" style="z-index: 13;"><pre><code>def outside():
    info = 1
    def inside():
        print info
    inside()

outside()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="50def78bdb37f07d7c0244da59d2cab7"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Functions are 1st class objects</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="e75757af139975ff8c56d8ea6b3af0fa"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;">
<ul>
	<li>(nearly) Everything in Python is an object</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 365px; height: 159px; left: 337px; top: 378px;" data-block-id="79d496e0253835dd85dfce2c4f206c71"><div class="sl-block-content" style="z-index: 13;"><pre><code>def func():
    pass

type(func)
func.__class__
issubclass(func.__class__, object)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="5c66895dd1a458b74273917c584d5d6a"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Treating functions as objects</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="b2f52066ca83ebe36351550b73a5d772"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>We can use functions just like integers and other primitives</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 410px; height: 234px; left: 275px; top: 350px;" data-block-id="4753d28423f18d61f76ba048c19bdc05"><div class="sl-block-content" style="z-index: 13;"><pre><code>def add(x, y):
    return x + y

def sub(x, y):
    return x + y

def do_math(operation, x, y):
    return operation(x, y)

do_math(sub, 10, 5)
do_math(add, 2, 2)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="2b7dd4e303a9b25dc971e671f6760405"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>What about inner functions?</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="439c2ebe020ba654285e130db47d0b97"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>Functions defined in other functions are still just objects</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 452px; height: 180px; left: 254px; top: 350px;" data-block-id="1285161787b743c696074f09f9f71cf9"><div class="sl-block-content" style="z-index: 13;"><pre><code>def outside():
    def inside():
        print "inside the inner function"
    return inside

my_func = outside()
my_func
my_func()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="df49b8aba533bc4eeef7e9b6ffa0c5ff"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Closures</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="d7a7500c6bd22598245cf0f91ac4b6b3"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>Closures are a way to handle scoping and variable lifetimes so the function objects act as expected</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 452px; height: 193px; left: 254px; top: 350px;" data-block-id="dc25cbc173fa336cd9eef139f379199c"><div class="sl-block-content" style="z-index: 13;"><pre><code>def outside():
    info = 1
    def inside():
        print info
    return inside

my_func = outside()
my_func.func_closure
my_func()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="8348c5557cfde1f0fc099df67b7cc033"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Closures</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="64ff70ca94baf0e56a767b43cc832943"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>Even with function arguments!</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 342px; height: 210px; left: 309px; top: 350px;" data-block-id="033db74c9c48d075b1a74477e75c67e2"><div class="sl-block-content" style="z-index: 13;"><pre><code>def outside(arg1):
    def inside():
        print arg1
    return inside

my_func1 = outside(123)
my_func2 = outside('xyz')
my_func1()
my_func2()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="742c2707af69cbb07aa7cabcadc15676"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Decorators (finally)</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="bda88dc37a6a9c72eccac90df40beefc"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>Decorators rely on "functions as objects" and closures</li>
	<li>They wrap one function in another</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 395px; height: 257px; left: 283px; top: 350px;" data-block-id="c26d0c090af104d83a9d05f3a6036741"><div class="sl-block-content" style="z-index: 13;"><pre><code>def wrapper(passed_in_func):
    def inside():
        print "before passed_in_func"
        retval = passed_in_func()
        return retval + 1
    return inside

def constant():
    return 2

decorated = wrapper(constant)
decorated()</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 81px; top: 23px; height: auto;" data-block-id="c131645e2c7bbb8947cc90e01dba64bf"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Useful Decorator</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 97px; height: auto;" data-block-id="ca0706ad718854c8ef39524e82e1a7df"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>Decorators can be used to add bounds checking or other features to our code</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 455px; height: 280px; left: 253px; top: 210px;" data-block-id="8dd959bad6e907e90c79e663943f25b9"><div class="sl-block-content" style="z-index: 13;"><pre><code>def add_two_numbers(x, y):
    return x + y

def ensure_positivity(func):
    def inner(x, y):
        return func(abs(x), abs(y))
    return inner

add_two_numbers(-10, 10)

add_two_numbers = ensure_positivity(add_two_numbers)

add_two_numbers(-10, 10)
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 81px; top: 23px; height: auto;" data-block-id="72e50d746b03be124b52fea47ad7e8c5"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Useful Decorator Syntax</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 97px; height: auto;" data-block-id="70b34747cb26c700988c0a3d3cc07cc8"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>The @ symbol can be used as "syntactic sugar" to apply a decorator to a function</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 366px; height: 223px; left: 253px; top: 210px;" data-block-id="7dee83bbe0a7268a01a06fac245d42d4"><div class="sl-block-content" style="z-index: 13;"><pre><code>def ensure_positivity(func):
    def inner(x, y):
        return func(abs(x), abs(y))
    return inner

@ensure_positivity
def add_two_numbers(x, y):
    return x + y

add_two_numbers(-10, 10)
</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 81px; top: 23px; height: auto;" data-block-id="815462cfd64c0915de83a29822e730cb"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Args and Kwargs</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 97px; height: auto;" data-block-id="e50fdcf1e39e1baaa8c97525488ce971"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>We can catch all the args to a function in the special * variable (usually called *args)</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 366px; height: 242px; left: 297px; top: 229px;" data-block-id="e5e50806334d398fc2af842c54f2b3c2"><div class="sl-block-content" style="z-index: 13;"><pre><code>def argless(*args):
    print args

argless()
argless(1,2,3)

def twoargs(x, y, *args):
    print x, y, args

twoargs(1, 2, 3)
twoargs('a', 'b')</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 81px; top: 23px; height: auto;" data-block-id="56fc7458a8c62add0b2bb8c0e551b945"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Args and Kwargs</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 97px; height: auto;" data-block-id="ca9a88f7dbd423c9b41be8a61e6b73b9"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>We can also apply a list to an argument list</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 215px; height: 171px; left: 374px; top: 231px;" data-block-id="89575c81e2a2ce8b62e7412ac555af25"><div class="sl-block-content" style="z-index: 13;"><pre><code>def subtract(x, y):
    return x - y


subtract(10, 5)
lst = [10, 5]
subtract(*lst)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 81px; top: 23px; height: auto;" data-block-id="f63e141606215475c746d7bab1169aa6"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Args and Kwargs</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 97px; height: auto;" data-block-id="25d90ddf66867ff5c3da55cd2b3c8e3d"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>Kwargs can be handled the same way - but with ** (usually used as **kwargs)</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 305px; height: 280px; left: 329px; top: 216px;" data-block-id="7fdcbcf863c8e991fefa47ffbbec5974"><div class="sl-block-content" style="z-index: 13;"><pre><code>def kwargless(**kwargs):
    print kwargs


kwargless()
kwargless(x=1, y=2)


def subtract(x, y):
    return x - y

values = {'x': 10, 'y': 5}
subtract(**values)</code></pre></div></div></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 81px; top: 23px; height: auto;" data-block-id="26f2909890b6d61c9709f09b044e5bf4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text" style="z-index: 10;">
<h2>Args and Kwargs in Decorators</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 97px; height: auto;" data-block-id="124769b7f85d0cea123aaff9a6bb815e"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text" style="z-index: 11;" dir="ui">
<ul>
	<li>We can pass along any args or kwargs we have from the decorator to the wrapped function</li>
</ul>
</div></div>
<div class="sl-block" data-block-type="code" style="width: 801px; height: 273px; left: 80px; top: 200px;" data-block-id="faacb641d8b8a49d0ee0165f4dddcb52"><div class="sl-block-content" style="z-index: 13;"><pre><code>def debug_call(func):
    def inner(*args, **kwargs):
        print "{} called with {} {}".format(func.func_name, args, kwargs)
        func(*args, **kwargs)
    return inner

@debug_call
def add(x, y=0):
    return x + y

print add(1, 2)
print add(y=3, x=5)
print add(5)</code></pre></div></div></section><section class="has-dark-background" data-background-color="#274e13"><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 190px; height: auto;" data-block-id="c7963f8367f479937571a8ab895bffe4"><div class="sl-block-content" data-placeholder-tag="h2" data-placeholder-text="Title Text">
<h2>Lab decorators</h2>
</div></div>
<div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 264px; height: auto;" data-block-id="36573126f8e71698d8a93cd7f2a9ac40"><div class="sl-block-content" data-placeholder-tag="p" data-placeholder-text="Text">
<ul>
	<li>Follow the instructions in:</li>
</ul>

<pre style="text-align:center">lab_decorators.py</pre>

<ul>
	<li>Register your completion in Socrative</li>
</ul>
</div></div></section></section><section><div class="sl-block" data-block-type="text" style="width: 800px; left: 80px; top: 270px; height: auto;" data-block-id="63def5736e0c23e0e0d7fe2fda548d16"><div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text">
<h1>Meta Classes</h1>
</div></div></section>
			</div>
		</div>

		<script>
			var SLConfig = {"deck": {"id":512444,"slug":"python-ii","title":"Python II","description":"Course materials for the penultimate class in the software development curriculum: Python II","visibility":"all","published_at":"2015-10-13T12:15:02.218Z","sanitize_messages":null,"thumbnail_url":"https://s3.amazonaws.com/media-p.slid.es/thumbnails/secure/770c85/decks.jpg","view_count":12,"user":{"id":105368,"username":"racku","name":"Rackspace University","description":"","thumbnail_url":"https://www.gravatar.com/avatar/4fdd35b37f5a9854774386e628b420fe?s=140\u0026d=https%3A%2F%2Fs3.amazonaws.com%2Fstatic.slid.es%2Fimages%2Fdefault-profile-picture.png","pro":true,"enterprise":false,"enterprise_manager":false,"settings":{"id":245,"present_controls":true,"present_upsizing":true,"present_notes":true},"registered":true},"background_transition":"concave","transition":"default","theme_id":null,"theme_font":"sketch","theme_color":"black-mint","auto_slide_interval":0,"comments_enabled":true,"forking_enabled":false,"rolling_links":false,"center":false,"should_loop":false,"share_notes":false,"slide_number":true,"rtl":false,"version":2,"notes":{}}};
			SLConfig.current_user = {
				name: "Rackspace University",
				username: "racku",
				pro: true
			};
		</script>

		<script src="lib/head.min.js"></script>
		<script src="lib/reveal.min.js"></script>
		<script>
			// Make Slides speaker notes available in the reveal.js speaker view
			if( SLConfig.deck.notes ) {
				[].forEach.call( document.querySelectorAll( '.reveal .slides section' ), function( slide ) {

					var value = SLConfig.deck.notes[ slide.getAttribute( 'data-id' ) ];
					if( value && typeof value === 'string' ) {
						slide.setAttribute( 'data-notes', value );
					}

				} );
			}

			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				mouseWheel: false,
				showNotes: SLConfig.deck.share_notes,
				slideNumber: SLConfig.deck.slide_number,

				autoSlide: SLConfig.deck.auto_slide_interval || 0,
				autoSlideStoppable: true,

				rolling_links: SLConfig.deck.rolling_links || true,
				center: SLConfig.deck.center || false,
				loop: SLConfig.deck.should_loop || false,
				rtl: SLConfig.deck.rtl || false,

				transition: SLConfig.deck.transition,
				backgroundTransition: SLConfig.deck.background_transition,

				maxScale: 2,

				dependencies: [
					{ src: 'lib/reveal-plugins/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'lib/reveal-plugins/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'lib/reveal-plugins/highlight/highlight.js', async: true, callback: function() { hljs.initHighlighting(); hljs.initHighlightingOnLoad(); } },
					{ src: 'lib/reveal-plugins/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});
		</script>

		

	</body>
</html>
